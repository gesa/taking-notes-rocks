<html>
  <head>
    <title>Who's taking notes?</title>
    <style type="text/css">
      body {
        font-family: "Helvetica Neue";
        padding-top: 8rem;
        text-align: center;
      }

      h1 {
        font-size: 13rem;
        margin: 0;
        text-transform: uppercase;
      }

      h2 { font-size: 8rem; }
      h3 { font-size: 4rem; margin: 0; }

      button { padding: 1rem; font-size: 1rem; }

      .hide { display: none; }
    </style>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
  </head>
  <body id="timer">
    <p>Who's taking notes?</p>
    <button onclick="countdown()">Let's find out</button><br>

    <br>
    <p><a href="#" class="js-show-people-selector">Edit People</a></p>
    <section id="people_selector">
      <form id="people_selector_form"></form>
    </section>

    <script type="text/javascript">
      var people, rand, timer_count, countdown, reload, editPeople;

      // Define full list of people
      people = ["adam", "ashley", "azita", "bret", "broox", "chris"];
      peopleTemp = people;

      // Define countdown length (in seconds)
      timer_count = 3;

      // Randomly select a person
      selectPerson = function() {
        return peopleTemp[Math.floor(Math.random() * peopleTemp.length)];
      }

      // Countdown and display result
      countdown = function() {
        person = selectPerson();

        if(timer_count > 0) {
          document.body.innerHTML = "<h1>" + timer_count + "</h1>";
          timer_count--;
          setTimeout(function() { countdown(); }, 1000);
        } else {
          document.body.innerHTML = "<h3>Grab a pen</h3><h1>" + person + "</h1><h3>you're taking notes!</h3><p><button onclick='reload()'>Reset</button></p>";
        }
      }

      // Edit people
      editPeople = function() {
        $div = $("#people_selector");

        $div.removeClass("hide");

        for (var i = 0, length = people.length; i < length; i++) {
          $div.find("#people_selector_form").append("<label><input class='js-person-checkbox' type='checkbox' checked='checked' value='" + people[i] + "'>" + people[i] +"</label>");
        }
      }

      // Reveal checkboxes to deselect people
      $(".js-show-people-selector").on("click", function(e) {
        e.preventDefault();

        editPeople();
      });

      // Temporarily remove person from list
      removePerson = function(index) {
        if (index > -1) {
          peopleTemp.splice(index, 1);
        }
      }

      // Temporarily add person back to list
      addPerson = function(person) {
        peopleTemp.push(person);
        peopleTemp.sort();
      }

      // Watch checkbox changes
      $(document).on('change', ".js-person-checkbox", function() {
        $this  = $(this);
        state  = $this.prop('checked');
        person = $this.val();
        index  = people.indexOf(person);

        if (state === false) {
          removePerson(index);
        } else {
          addPerson(person);
        }
      });

      // Reload page
      reload = function() {
        location.reload();
      }
    </script>
  </body>
